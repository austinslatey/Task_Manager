@{
  ViewData["Title"] = "Kanban Board";
}

@section Styles {
  <link rel="stylesheet" href="~/css/Home.css" />
}

<p>Create Tasks</p>
<button onclick="addColumn()">Add Column</button>

<div class="container bg-dark text-center" id="kanbanBoard">
  <div class="col border">
    <h3 contenteditable="true" onblur="saveColumn(this)" id="column1">To Do:</h3>
    <button class="bg-success text-light rounded" onclick="openTaskModal('column1')" data-bs-toggle="modal"
      data-bs-target="#taskModal">+</button>
    <button class="bg-danger text-light rounded" onclick="removeColumn(this)">x</button>
  </div>
  <div class="col border">
    <h3 contenteditable="true" onblur="saveColumn(this)" id="column2">Doing:</h3>
    <button class="bg-success text-light rounded" onclick="openTaskModal('column2')" data-bs-toggle="modal"
      data-bs-target="#taskModal">+</button>
    <button class="bg-danger text-light rounded" data-bs-toggle="modal" data-bs-target="#taskModal">x</button>
  </div>
  <div class="col border">
    <h3 contenteditable="true" onblur="saveColumn(this)" id="column3">Done:</h3>
    <button class="bg-success text-light rounded" onclick="openTaskModal('column3')">+</button>
    <button class="bg-danger text-light rounded" onclick="removeColumn(this)">x</button>
  </div>
  @* dynamic columns go here *@
  <div class="container" id="dynamicColumns"></div>

</div>

<!-- Modal -->
<div class="modal fade" id="taskModal" tabindex="-1" aria-labelledby="taskModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content bg-secondary">
      <div class="modal-header">
        <h5 class="modal-title" id="taskModalLabel">Add New Task</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="taskForm">
          <!-- Hidden input field to store column ID -->
          <input type="hidden" id="columnId">
          <div class="mb-3">
            <label for="taskTitle" class="form-label">Title</label>
            <input type="text" class="form-control" id="taskTitle" required>
          </div>
          <div class="mb-3">
            <label for="taskDescription" class="form-label">Description</label>
            <textarea class="form-control" id="taskDescription" rows="3"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="saveTask" onclick="saveTask()">Save Task</button>
      </div>
    </div>
  </div>
</div>
